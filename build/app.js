var $t="tetrix";var Ft={type:"git",url:"git+https://github.com/Valexr/tetrix.git"};function g(){}function st(t){return t()}function kt(){return Object.create(null)}function O(t){t.forEach(st)}function T(t){return typeof t=="function"}function E(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ct(t){return Object.keys(t).length===0}function lt(t,...e){if(t==null)return g;let n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function D(t){let e;return lt(t,n=>e=n)(),e}function j(t,e,n){t.$$.on_destroy.push(lt(e,n))}function Ot(t){return t&&T(t.destroy)?t.destroy:g}var Dt=!1;function Yt(){Dt=!0}function Kt(){Dt=!1}function p(t,e){t.appendChild(e)}function b(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function Z(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function S(){return v(" ")}function nt(){return v("")}function U(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ct(t){return t===""?null:+t}function Jt(t){return Array.from(t.childNodes)}function V(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ut(t,e){t.value=e??""}function ft(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function at(t,e){for(let n=0;n<t.options.length;n+=1){let i=t.options[n];if(i.__value===e){i.selected=!0;return}}t.selectedIndex=-1}function Mt(t){let e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function X(t,e,n){t.classList[n?"add":"remove"](e)}var dt;function J(t){dt=t}var W=[];var Et=[],tt=[],St=[],Qt=Promise.resolve(),rt=!1;function Zt(){rt||(rt=!0,Qt.then(At))}function Q(t){tt.push(t)}var ot=new Set,G=0;function At(){if(G!==0)return;let t=dt;do{try{for(;G<W.length;){let e=W[G];G++,J(e),te(e.$$)}}catch(e){throw W.length=0,G=0,e}for(J(null),W.length=0,G=0;Et.length;)Et.pop()();for(let e=0;e<tt.length;e+=1){let n=tt[e];ot.has(n)||(ot.add(n),n())}tt.length=0}while(W.length);for(;St.length;)St.pop()();rt=!1,ot.clear(),J(t)}function te(t){if(t.fragment!==null){t.update(),O(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Q)}}var et=new Set,L;function _t(){L={r:0,c:[],p:L}}function pt(){L.r||O(L.c),L=L.p}function $(t,e){t&&t.i&&(et.delete(t),t.i(e))}function M(t,e,n,i){if(t&&t.o){if(et.has(t))return;et.add(t),L.c.push(()=>{et.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}var we=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Y(t){t&&t.c()}function z(t,e,n,i){let{fragment:o,after_update:l}=t.$$;o&&o.m(e,n),i||Q(()=>{let s=t.$$.on_mount.map(st).filter(T);t.$$.on_destroy?t.$$.on_destroy.push(...s):O(s),t.$$.on_mount=[]}),l.forEach(Q)}function q(t,e){let n=t.$$;n.fragment!==null&&(O(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ee(t,e){t.$$.dirty[0]===-1&&(W.push(t),Zt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(t,e,n,i,o,l,s,f=[-1]){let r=dt;J(t);let u=t.$$={fragment:null,ctx:[],props:l,update:g,not_equal:o,bound:kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:kt(),dirty:f,skip_bound:!1,root:e.target||r.$$.root};s&&s(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(a,d,..._)=>{let F=_.length?_[0]:d;return u.ctx&&o(u.ctx[a],u.ctx[a]=F)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](F),c&&ee(t,a)),d}):[],u.update(),c=!0,O(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){Yt();let a=Jt(e.target);u.fragment&&u.fragment.l(a),a.forEach(h)}else u.fragment&&u.fragment.c();e.intro&&$(t.$$.fragment),z(t,e.target,e.anchor,e.customElement),Kt(),At()}J(r)}var ne;typeof HTMLElement=="function"&&(ne=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(st).filter(T);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){O(this.$$.on_disconnect)}$destroy(){q(this,1),this.$destroy=g}$on(t,e){if(!T(e))return g;let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{let i=n.indexOf(e);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!Ct(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var k=class{$destroy(){q(this,1),this.$destroy=g}$on(e,n){if(!T(n))return g;let i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{let o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!Ct(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var K=[];function B(t,e=g){let n,i=new Set;function o(f){if(E(t,f)&&(t=f,n)){let r=!K.length;for(let u of i)u[1](),K.push(u,t);if(r){for(let u=0;u<K.length;u+=2)K[u][0](K[u+1]);K.length=0}}}function l(f){o(f(t))}function s(f,r=g){let u=[f,r];return i.add(u),i.size===1&&(n=e(o)||g),f(t),()=>{i.delete(u),i.size===0&&(n(),n=null)}}return{set:o,update:l,subscribe:s}}function jt(t,e,n){return Math.min(Math.max(e,t),n)}function it(t,e){return t.x===e.x&&t.y===e.y}function ie(){let{subscribe:t,set:e,update:n}=B([]);return{subscribe:t,set:e,clear(){e([])},add(i){n(o=>[...o,...i])},include(i){return D(this).some(o=>i?.some(l=>it(o,l)))},full(){return D(this).some(({x:i,y:o})=>!o)}}}var R=ie();var P={block:[{x:4,y:0},{x:5,y:0},{x:4,y:1},{x:5,y:1}],line:[{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3}],line_x:[{x:3,y:0},{x:4,y:0},{x:5,y:0},{x:6,y:0}],cross:[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:2,y:1},{x:1,y:2}],tet:[{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:1,y:1}],let:[{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:1,y:2}],letr:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:0,y:2}],zet:[{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:0,y:2}],zetr:[{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:2}]};function oe(){let{subscribe:t,set:e,update:n}=B([]),i={Up:{x:0,y:-1},Down:{x:0,y:1},Left:{x:-1,y:0},Right:{x:1,y:0}};return e(P.line_x),{subscribe:t,set:e,random(){let o=Object.keys(P),l=o[o.length*Math.random()<<0];this.get(l)},get(o){e(P[o])},move(o){let l=!1,s=!1;return n(f=>{let r=i[o],u=f.map(({x:c,y:a})=>({x:c+r.x,y:a+r.y}));return l=u.some(({x:c,y:a})=>c<0||a<0||c>=10||a>=20),s=R.include(u),s||l?f:u}),s||l},rotate(){}}}var C=oe();var Nt=B({width:10,height:20});function re(){let{subscribe:t,set:e,update:n}=B();e({state:"",score:0,speed:1});function i(l){n(s=>Object.assign(s,{state:l}))}function o(l){n(s=>Object.assign(s,{score:l}))}return{subscribe:t,state:i,score:o,set:e,start(){o(0),i("play"),R.clear(),ht()},pause(){i("pause")},resume(){i("play"),ht()},stop(){i("stop")},scoreup(){n(l=>Object.assign(l,{score:l.score+10*l.speed}))},speedup(){n(l=>Object.assign(l,{speed:jt(1,l.speed+1,10)}))}}}var w=re(),mt=!1;function ht(){setTimeout(()=>{D(w).state==="play"&&(R.full()&&w.stop(),mt=C.move("Down"),mt&&(R.add(D(C)),C.random()),console.log(mt),ht())},900-80*D(w).speed)}function Tt(t,e,n){let i=t.slice();return i[5]=e[n][0],i[6]=e[n][1],i}function se(t){let e,n=t[0].state==="pause"?"Resume":"Start",i,o,l,s,f,r=t[0].state!=="pause"&&qt(t);return{c(){e=m("button"),i=v(n),o=S(),r&&r.c(),l=nt(),y(e,"class","lg")},m(u,c){b(u,e,c),p(e,i),b(u,o,c),r&&r.m(u,c),b(u,l,c),s||(f=U(e,"click",function(){T(t[0].state==="pause"?w.resume:w.start)&&(t[0].state==="pause"?w.resume:w.start).apply(this,arguments)}),s=!0)},p(u,c){t=u,c&1&&n!==(n=t[0].state==="pause"?"Resume":"Start")&&V(i,n),t[0].state!=="pause"?r?r.p(t,c):(r=qt(t),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},d(u){u&&h(e),u&&h(o),r&&r.d(u),u&&h(l),s=!1,f()}}}function le(t){let e,n,i,o,l;return{c(){e=m("button"),e.textContent="Pause",n=S(),i=m("button"),i.textContent="Stop"},m(s,f){b(s,e,f),b(s,n,f),b(s,i,f),o||(l=[U(e,"click",w.pause),U(i,"click",w.stop)],o=!0)},p:g,d(s){s&&h(e),s&&h(n),s&&h(i),o=!1,O(l)}}}function qt(t){let e,n,i,o,l,s,f,r,u,c,a=Object.entries(P),d=[];for(let _=0;_<a.length;_+=1)d[_]=Rt(Tt(t,a,_));return{c(){e=m("fieldset"),n=m("label"),i=v(`Speed
                    `),o=m("input"),l=S(),s=m("label"),f=v(`Fugure
                    `),r=m("select");for(let _=0;_<d.length;_+=1)d[_].c();y(o,"type","number"),y(o,"min","1"),y(o,"max","10"),y(o,"maxlength","2"),y(o,"size","3"),t[1]===void 0&&Q(()=>t[3].call(r))},m(_,F){b(_,e,F),p(e,n),p(n,i),p(n,o),ut(o,t[0].speed),p(e,l),p(e,s),p(s,f),p(s,r);for(let x=0;x<d.length;x+=1)d[x].m(r,null);at(r,t[1]),u||(c=[U(o,"input",t[2]),U(r,"change",t[3])],u=!0)},p(_,F){if(F&1&&ct(o.value)!==_[0].speed&&ut(o,_[0].speed),F&0){a=Object.entries(P);let x;for(x=0;x<a.length;x+=1){let I=Tt(_,a,x);d[x]?d[x].p(I,F):(d[x]=Rt(I),d[x].c(),d[x].m(r,null))}for(;x<d.length;x+=1)d[x].d(1);d.length=a.length}F&2&&at(r,_[1])},d(_){_&&h(e),Z(d,_),u=!1,O(c)}}}function Rt(t){let e,n=t[5]+"",i,o;return{c(){e=m("option"),i=v(n),e.__value=o=t[6],e.value=e.__value},m(l,s){b(l,e,s),p(e,i)},p:g,d(l){l&&h(e)}}}function ce(t){let e;function n(l,s){return l[0].state==="play"?le:se}let i=n(t,-1),o=i(t);return{c(){e=m("nav"),o.c(),X(e,"playing",t[0].state==="play")},m(l,s){b(l,e,s),o.m(e,null)},p(l,[s]){i===(i=n(l,s))&&o?o.p(l,s):(o.d(1),o=i(l),o&&(o.c(),o.m(e,null))),s&1&&X(e,"playing",l[0].state==="play")},i:g,o:g,d(l){l&&h(e),o.d()}}}function ue(t,e,n){let i,o;j(t,w,r=>n(0,i=r)),j(t,C,r=>n(1,o=r));let l=[["full",1],["half",1.5],["quart",2]];function s(){i.speed=ct(this.value),w.set(i)}function f(){o=Mt(this),C.set(o),P}return[i,o,s,f]}var yt=class extends k{constructor(e){super(),A(this,e,ue,ce,E,{})}},Lt=yt;function fe(t){let e,n,i;return{c(){e=m("span"),y(e,"class","pixel svelte-14oxwi3"),y(e,"data-x",n=t[0].x),y(e,"data-y",i=t[0].y),X(e,"fill",t[1])},m(o,l){b(o,e,l)},p(o,[l]){l&1&&n!==(n=o[0].x)&&y(e,"data-x",n),l&1&&i!==(i=o[0].y)&&y(e,"data-y",i),l&2&&X(e,"fill",o[1])},i:g,o:g,d(o){o&&h(e)}}}function ae(t,e,n){let i,{filled:o}=e,{pixel:l}=e;return t.$$set=s=>{"filled"in s&&n(2,o=s.filled),"pixel"in s&&n(0,l=s.pixel)},t.$$.update=()=>{if(t.$$.dirty&5)t:n(1,i=o.some(s=>it(l,s)))},[l,i,o]}var gt=class extends k{constructor(e){super(),A(this,e,ae,fe,E,{filled:2,pixel:0})}},zt=gt;function Bt(t){window.onkeydown=n=>e(n);function e(n){if(D(w).state==="play")if(n.key.includes("Arrow")){let i=n.key.replace("Arrow","");C.move(i)}else n.key.includes(" ")?(n.preventDefault(),C.rotate()):n.key.includes("Escape")&&(n.preventDefault(),w.pause())}}function Pt(t,e,n){let i=t.slice();return i[3]=e[n],i[5]=n,i}function It(t,e,n){let i=t.slice();i[3]=e[n],i[8]=n;let o={x:i[8],y:i[5]};return i[6]=o,i}function Ht(t){let e,n;return e=new zt({props:{pixel:t[6],filled:[...t[1],...t[2]]}}),{c(){Y(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){let l={};o&6&&(l.filled=[...i[1],...i[2]]),e.$set(l)},i(i){n||($(e.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function Gt(t){let e,n,i={length:t[0].width},o=[];for(let s=0;s<i.length;s+=1)o[s]=Ht(It(t,i,s));let l=s=>M(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=nt()},m(s,f){for(let r=0;r<o.length;r+=1)o[r].m(s,f);b(s,e,f),n=!0},p(s,f){if(f&7){i={length:s[0].width};let r;for(r=0;r<i.length;r+=1){let u=It(s,i,r);o[r]?(o[r].p(u,f),$(o[r],1)):(o[r]=Ht(u),o[r].c(),$(o[r],1),o[r].m(e.parentNode,e))}for(_t(),r=i.length;r<o.length;r+=1)l(r);pt()}},i(s){if(!n){for(let f=0;f<i.length;f+=1)$(o[f]);n=!0}},o(s){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)M(o[f]);n=!1},d(s){Z(o,s),s&&h(e)}}}function de(t){let e,n,i,o,l,s,f={length:t[0].height},r=[];for(let c=0;c<f.length;c+=1)r[c]=Gt(Pt(t,f,c));let u=c=>M(r[c],1,1,()=>{r[c]=null});return{c(){e=m("main"),n=m("section");for(let c=0;c<r.length;c+=1)r[c].c();y(n,"id","board"),ft(n,"--cols",t[0].width),y(n,"class","svelte-1w2mvlo"),y(e,"class","svelte-1w2mvlo")},m(c,a){b(c,e,a),p(e,n);for(let d=0;d<r.length;d+=1)r[d].m(n,null);o=!0,l||(s=Ot(i=Bt.call(null,n)),l=!0)},p(c,[a]){if(a&7){f={length:c[0].height};let d;for(d=0;d<f.length;d+=1){let _=Pt(c,f,d);r[d]?(r[d].p(_,a),$(r[d],1)):(r[d]=Gt(_),r[d].c(),$(r[d],1),r[d].m(n,null))}for(_t(),d=f.length;d<r.length;d+=1)u(d);pt()}(!o||a&1)&&ft(n,"--cols",c[0].width)},i(c){if(!o){for(let a=0;a<f.length;a+=1)$(r[a]);o=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)M(r[a]);o=!1},d(c){c&&h(e),Z(r,c),l=!1,s()}}}function _e(t,e,n){let i,o,l;return j(t,Nt,s=>n(0,i=s)),j(t,C,s=>n(1,o=s)),j(t,R,s=>n(2,l=s)),[i,o,l]}var bt=class extends k{constructor(e){super(),A(this,e,_e,de,E,{})}},Wt=bt;var Ut='<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" fill="currentColor"/></svg>';function me(t){let e,n,i,o=t[2].score+"",l,s,f,r,u,c,a,d,_,F,x=t[2].speed+"",I;return{c(){e=m("header"),n=m("p"),i=v("Score: "),l=v(o),s=S(),f=m("h1"),r=m("a"),c=S(),a=v(t[0]),d=S(),_=m("p"),F=v("Speed: "),I=v(x),y(r,"href",u=t[1].url),y(r,"target","_blank"),y(r,"rel","noreferrer"),y(r,"id","gh")},m(N,H){b(N,e,H),p(e,n),p(n,i),p(n,l),p(e,s),p(e,f),p(f,r),r.innerHTML=Ut,p(f,c),p(f,a),p(e,d),p(e,_),p(_,F),p(_,I)},p(N,[H]){H&4&&o!==(o=N[2].score+"")&&V(l,o),H&2&&u!==(u=N[1].url)&&y(r,"href",u),H&1&&V(a,N[0]),H&4&&x!==(x=N[2].speed+"")&&V(I,x)},i:g,o:g,d(N){N&&h(e)}}}function he(t,e,n){let i;j(t,w,s=>n(2,i=s));let{name:o}=e,{repository:l}=e;return t.$$set=s=>{"name"in s&&n(0,o=s.name),"repository"in s&&n(1,l=s.repository)},[o,l,i]}var xt=class extends k{constructor(e){super(),A(this,e,he,me,E,{name:0,repository:1})}},Vt=xt;function ye(t){let e,n,i,o,l,s,f,r,u;return document.title=e=t[0],i=new Vt({props:{name:t[0],repository:t[1]}}),l=new Wt({}),r=new Lt({}),{c(){n=S(),Y(i.$$.fragment),o=S(),Y(l.$$.fragment),s=S(),f=m("footer"),Y(r.$$.fragment)},m(c,a){b(c,n,a),z(i,c,a),b(c,o,a),z(l,c,a),b(c,s,a),b(c,f,a),z(r,f,null),u=!0},p(c,[a]){(!u||a&1)&&e!==(e=c[0])&&(document.title=e);let d={};a&1&&(d.name=c[0]),a&2&&(d.repository=c[1]),i.$set(d)},i(c){u||($(i.$$.fragment,c),$(l.$$.fragment,c),$(r.$$.fragment,c),u=!0)},o(c){M(i.$$.fragment,c),M(l.$$.fragment,c),M(r.$$.fragment,c),u=!1},d(c){c&&h(n),q(i,c),c&&h(o),q(l,c),c&&h(s),c&&h(f),q(r)}}}function ge(t,e,n){let{name:i}=e,{repository:o}=e;return t.$$set=l=>{"name"in l&&n(0,i=l.name),"repository"in l&&n(1,o=l.repository)},[i,o]}var wt=class extends k{constructor(e){super(),A(this,e,ge,ye,E,{name:0,repository:1})}},Xt=wt;var be=new Xt({target:document.body,props:{name:$t,repository:Ft}}),qn=be;export{qn as default};
